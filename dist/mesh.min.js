!function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(s)return s(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";e.exports={Bus:t(4),MapBus:t(9),NoopBus:t(10),WrapBus:t(19),RaceBus:t(12),RetryBus:t(15),RandomBus:t(13),AcceptBus:t(2),RejectBus:t(14),DelayedBus:t(7),SequenceBus:t(17),ParallelBus:t(11),BufferedBus:t(5),FallbackBus:t(8),TailableBus:t(18),CatchErrorBus:t(6),RoundRobinBus:t(16),AttachDefaultsBus:t(3),Response:t(25),EmptyResponse:t(23),ErrorResponse:t(24),BufferedResponse:t(22),NodeStreamResponse:t(26),WritableStream:t(29)}},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,2:2,22:22,23:23,24:24,25:25,26:26,29:29,3:3,4:4,5:5,6:6,7:7,8:8,9:9}],2:[function(t,e,n){"use strict";function r(t,e,n){this._filter=t,this._acceptBus=e||s.create(),this._rejectBus=n||s.create()}var i=t(4),s=t(10),o=t(25);i.extend(r,{execute:function(t){var e=this,n=this._filter(t);return n&&n.then?o.create(function(r){n.then(function(n){e._execute(n,t).pipeTo(r)},r.abort.bind(r))}):this._execute(n,t)},_execute:function(t,e){return t?this._acceptBus.execute(e):this._rejectBus.execute(e)}}),e.exports=r},{10:10,25:25,4:4}],3:[function(t,e,n){"use strict";function r(t){for(var e=Array.prototype.slice.call(arguments,1),n=0,r=e.length;r>n;n++){var i=e[n];for(var s in i)void 0==t[s]&&(t[s]=i[s])}return t}function i(t,e){this._properties=t,this._bus=e}var s=t(4);s.extend(i,{execute:function(t){return this._bus.execute(r(t,this._properties))}}),e.exports=i},{4:4}],4:[function(t,e,n){"use strict";function r(){}var i=t(21);i(r,{execute:function(t){}}),r.create=t(20),r.extend=i,e.exports=r},{20:20,21:21}],5:[function(t,e,n){"use strict";function r(t,e){this._error=t,this._chunkValues=e}var i=t(4),s=t(22);i.extend(r,{execute:function(t){return s.create(this._error,this._chunkValues)}}),e.exports=r},{22:22,4:4}],6:[function(t,e,n){"use strict";function r(t,e){this._bus=t,this._catchError=e}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){e._bus.execute(t).pipeTo({write:function(t){n.write(t)},close:function(){n.close()},abort:function(r){try{e._catchError(r,t);n.close()}catch(i){n.abort(i)}}})})}}),e.exports=r},{25:25,4:4}],7:[function(t,e,n){"use strict";function r(t,e){this._ms=e,this._bus=t}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){setTimeout(function(){e._bus.execute(t).pipeTo(n)},e._ms)})}}),e.exports=r},{25:25,4:4}],8:[function(t,e,n){"use strict";function r(t){this._busses=t}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){var r=e._busses.concat(),i=function s(e){if(e===r.length)return n.close();var i=r[e].execute(t),o=!1;i.pipeTo({write:function(t){o=!0,n.write(t)},close:function(){o?n.close():s(e+1)},abort:n.abort.bind(n)})};i(0)})}}),e.exports=r},{25:25,4:4}],9:[function(t,e,n){"use strict";function r(t,e){this._bus=t,this._map=e}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){e._bus.execute(t).pipeTo({write:function(r){try{e._map(r,n,t)}catch(i){return n.abort(i),Promise.reject(i)}},close:function(){n.close()},abort:n.abort.bind(n)})})}}),e.exports=r},{25:25,4:4}],10:[function(t,e,n){"use strict";function r(){}var i=t(4),s=t(23);i.extend(r,{execute:function(t){return s.create()}}),e.exports=r},{23:23,4:4}],11:[function(t,e,n){"use strict";function r(t){this._busses=t}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){var r=e._busses.concat(),i=r.length;r.forEach(function(e){var r=e.execute(t);r.pipeTo(n,{preventClose:!0}),r.then(function(){--i||n.close()})})})}}),e.exports=r},{25:25,4:4}],12:[function(t,e,n){"use strict";function r(t){this._busses=t}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){var r=e._busses.concat(),i=r.length,s=-1;r.forEach(function(e,r){var o=e.execute(t);o.pipeTo({write:function(t){~s&&s!==r||(s=r,n.write(t))},close:function(){(~s&&s===r||0===--i)&&n.close()},abort:n.abort.bind(n)})})})}}),e.exports=r},{25:25,4:4}],13:[function(t,e,n){"use strict";function r(t){this._busses=t}var i=t(4);i.extend(r,{execute:function(t){return this._busses[Math.floor(Math.random()*this._busses.length)].execute(t)}}),e.exports=r},{4:4}],14:[function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,n,e)}var i=t(2);i.extend(r),e.exports=r},{2:2}],15:[function(t,e,n){"use strict";function r(t,e,n){2===arguments.length&&(n=e,e=function(t,e){return!0}),this._maxRetries=t,this._bus=n,this._errorFilter=e}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){var r,i=!1,s=function o(s){if(!s)return n.abort(r);var u=e._bus.execute(t);u.pipeTo({write:function(t){i=!0,n.write(t)},close:function(){n.close()},abort:function(t){r=t,o(s-1)}})};s(e._maxRetries)})}}),e.exports=r},{25:25,4:4}],16:[function(t,e,n){"use strict";function r(t){this._busses=t,this._i=0}var i=t(4);i.extend(r,{execute:function(t){var e=this._busses[this._i].execute(t);return this._i=(this._i+1)%this._busses.length,e}}),e.exports=r},{4:4}],17:[function(t,e,n){"use strict";function r(t){this._busses=t}var i=t(4),s=t(25);i.extend(r,{execute:function(t){var e=this;return s.create(function(n){var r=e._busses.concat(),i=function s(e){if(e===r.length)return n.close();var i=r[e].execute(t);i.pipeTo(n,{preventClose:!0}),i.then(function(){return s(e+1)})};i(0)})}}),e.exports=r},{25:25,4:4}],18:[function(t,e,n){"use strict";function r(t){this._bus=t,this._tails=[]}var i=t(4),s=t(25);i.extend(r,{addTail:function(t){var e=this;return s.create(function(t){e._tails.push(t),t.then(function(){e._tails.splice(e._tails.indexOf(t),1)})})},execute:function(t){var e=this,n=this._bus.execute(t);return n.then(function(){e._tails.forEach(function(e){e.write(t)})}),n}}),e.exports=r},{25:25,4:4}],19:[function(t,e,n){"use strict";function r(t){t.length>=2?this._execute=function(e){return new Promise(function(n,r){t(e,function(t,e){return t?r(t):void n.apply(this,Array.prototype.slice.call(arguments,1))})})}:this._execute=t}var i=t(4),s=t(21),o=t(25),u=t(22);s(i,r,{execute:function(t){var e=this._execute(t);return e&&e.read?e:e&&e.then?e.then?o.create(function(t){e.then(function(e){void 0!=e&&t.write(e),t.close()},t.abort.bind(t))}):void 0:u.create(void 0,e)}}),e.exports=r},{21:21,22:22,25:25,4:4}],20:[function(t,e,n){"use strict";e.exports=function(){var t=Object.create(this.prototype);return this.apply(t,arguments),t}},{}],21:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){this.constructor=s}var r,i,s=e,o=t;return"function"==typeof s?i=2:("object"==typeof o?(s=function(){},i=0):(s=o||function(){},i=1),o="function"==typeof this?this:Object),r=Array.prototype.slice.call(arguments,i),Object.assign(s,o),n.prototype=o.prototype,s.prototype=new n,Object.assign(s.prototype,Object.assign.apply(Object,[{}].concat(r))),s}},{}],22:[function(t,e,n){"use strict";function r(t,e){i.call(this,function(n){t&&n.abort(t),e=Array.isArray(e)?e:void 0!=e?[e]:[],e.forEach(n.write.bind(n)),n.close()})}var i=t(25);i.extend(r),e.exports=r},{25:25}],23:[function(t,e,n){"use strict";function r(){i.call(this)}var i=t(22);t(21);i.extend(r),e.exports=r},{21:21,22:22}],24:[function(t,e,n){"use strict";function r(t){i.call(this,t)}var i=t(22);i.extend(r),e.exports=r},{22:22}],25:[function(t,e,n){"use strict";function r(t){var e=this._writer=i.create();if(this._reader=e.getReader(),t){var n=t(e);n&&n.then&&n.then(function(){e.close()},e.abort.bind(e))}}var i=t(29),s=t(21);s(r,{then:function(t,e){return this._writer.then(t,e)},"catch":function(t){return this._writer["catch"](t)},read:function(){return this._reader.read()},pipeTo:function(t,e){return this._reader.pipeTo(t,e)},cancel:function(){return this._reader.cancel()}}),r.create=t(20),r.extend=s,e.exports=r},{20:20,21:21,29:29}],26:[function(t,e,n){"use strict";function r(t){i.call(this,function(e){if(!t)return e.close();var n=function i(){t.resume(),t.once("data",function(n){t.pause(),e.write(n).then(i)})},r=function(){e.close()};t.once("end",r).once("error",e.abort.bind(e)),n()})}var i=t(25);i.extend(r),e.exports=r},{25:25}],27:[function(t,e,n){"use strict";function r(){var t=this;this._values=[],this._promise=new Promise(function(e,n){t._resolve=e,t._reject=n})}var i=t(21);i(r,{then:function(t,e){return this._promise.then(t,e)},__signalWrite:function(){},__signalRead:function(){},write:function(t){var e=this;return this._closed?Promise.reject(new Error("cannot write to a closed stream")):(this._values.push(t),this.__signalWrite(),new Promise(function(t,n){e.__signalRead=function(){e.__signalRead=function(){},t()}}))},read:function(){var t=this;return this.__signalRead(),this._error?(this._reject(this._error),Promise.reject(this._error)):this._values.length?Promise.resolve({value:this._values.shift(),done:!1}):this._closed?(this._resolve(),Promise.resolve({value:void 0,done:!0})):new Promise(function(e,n){t.__signalWrite=function(){t.__signalWrite=function(){},t.read().then(e,n)}})},abort:function(t){this._error=t,this.__signalWrite()},close:function(){this._closed=!0,this.__signalWrite()}}),r.create=t(20),e.exports=r},{20:20,21:21}],28:[function(t,e,n){"use strict";function r(t){this._passThrough=t}var i=t(21);i(r,{read:function(){return this._passThrough.read()},pipeTo:function(t,e){var n=this;e||(e={});var r=function i(){n.read().then(function(n){n.done?e.preventClose||t.close():(t.write(n.value),i())},e.preventAbort?void 0:t.abort.bind(t))};return r(),t},cancel:function(){return this._passThrough.close()}}),r.create=t(20),e.exports=r},{20:20,21:21}],29:[function(t,e,n){"use strict";function r(t){this._passThrough=s.create(),this._reader=o.create(this._passThrough)}var i=t(21),s=t(27),o=t(28);i(r,{then:function(t,e){return this._passThrough.then(t,e)},"catch":function(t){return this.then(void 0,t)},write:function(t){return this._passThrough.write(t)},abort:function(t){this._passThrough.abort(t)},close:function(){this._passThrough.close()},getReader:function(){return this._reader}}),r.create=t(20),r.extend=t(21),e.exports=r},{20:20,21:21,27:27,28:28}]},{},[1]);